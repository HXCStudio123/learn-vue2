{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(data) {\n    this.walk(data);\n  }\n  walk(data) {\n    // 获取\n    // 设置\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]));\n  }\n}\n\n/**\n *\n * @param {*} obj 当前被劫持的对象\n * @param {*} key 遍历到的key\n * @param {*} value 当前key对应的value\n */\nfunction defineReactive(obj, key, value) {\n  // debugger\n  /**\n   * 1. 只能劫持当前存在的对象\n   * 2. $set $delete 去实现的 移除和添加响应\n   */\n  observe(value);\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      console.log(\"获取了当前的value\", value);\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) {\n        return;\n      }\n      console.log(\"修改了了当前的value\", newValue);\n      value = newValue;\n    },\n  });\n}\nexport function observe(data) {\n  if (typeof data !== \"object\" || data === null) {\n    return;\n  }\n  return new Observer(data);\n}\n","import { observe } from \"./observe/index\";\n/**\n * vm.xxx -> vm._data.xxx\n * @param {*} target 获取数据用的目标对象\n * @param {*} sourceKey 我当前从哪里才能代理到这个key的键名\n * @param {*} key 我们当前访问或者是操作的这个一个key值\n */\nfunction proxy(target, sourceKey, key) {\n  Object.defineProperty(target, key, {\n    get() {\n      return target[sourceKey][key];\n    },\n    set(newValue) {\n      target[sourceKey][key] = newValue;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  vm._data = data;\n  observe(data);\n  // vm.xxx 某一个key  vm._data.xxx\n  Object.keys(data).forEach((key) => proxy(vm, \"_data\", key));\n}\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initData(vm);\n  }\n}\n","import { initState } from \"./state\";\n\nexport default function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // mergeOptions，父组件和子组件之间公用的变量，Vue.extend \n    vm.$options = options\n\n    // 初始化data 初始化props 初始化methods\n    initState(vm)\n  };\n}\n","import initMixin from \"./init\";\nfunction Vue(options) {\n  this._init(options);\n}\ninitMixin(Vue)\n\nexport default Vue;\n"],"names":[],"mappings":"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"}